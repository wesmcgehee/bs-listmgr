/*
 *
 * Wijmo Library 1.2.0
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://www.wijmo.com/license
 *
 **/
(function(a){"use strict";var h="wijmo-wijsplitter-",w=h+"wrapper",q=h+"horizontal",r=h+"vertical",b=h+"h-",c=h+"v-",o="-content",l="panel1",m="panel2",j=l+o,u=m+o,y="bar",v="expander",t="ui-widget-header",k="ui-widget-content",s="ui-state-default",e="ui-state-hover",n="ui-state-active",d="ui-corner-",x="ui-icon",i="ui-icon-triangle-1-",f="collapsed",g="expanded",p="resize-helper";a.widget("wijmo.wijsplitter",{options:{sizing:null,sized:null,expand:null,collapse:null,expanded:null,collapsed:null,barZIndex:-1,showExpander:true,splitterDistance:100,orientation:"vertical",fullSplit:false,resizeSettings:{animationOptions:{duration:100,easing:"swing",disabled:false},ghost:false},panel1:{minSize:1,collapsed:false,scrollBars:"auto"},panel2:{minSize:1,collapsed:false,scrollBars:"auto"}},_setOption:function(c,d){var b=this,e=b.options,f=a.extend({},e[c]);if(c==="fullSplit")b._setFullSplit(d);else if(a.isPlainObject(e[c])){if(c==="panel1"&&d.collapsed!==undefined)b._setPanel1Collapsed(d.collapsed);else c==="panel2"&&d.collapsed!==undefined&&b._setPanel2Collapsed(d.collapsed);d=a.extend(true,e[c],d)}a.Widget.prototype._setOption.apply(b,arguments);if(f!==d)if(c==="orientation")b.refresh();else if(c==="fullSplit")b.refresh(true,false);else if(c==="splitterDistance"){b.refresh(false,false);b._trigger("sized")}},_create:function(){var a=this,b=a.element,c=a.options;a._fields={width:b.width(),height:b.height()};b.data("fields",a._fields);c.fullSplit&&a._setFullSplit(true);a._splitterify();a._updateElementsCss();a._updateElements();a._bindEvents();a._initResizer();a._trigger("load",null,a)},destroy:function(){var f=this,d=f.element,b=f._fields,i=b.expander,j=b.bar,e=b.panel1,h=b.originalContent,g=b.originalStyle,c=f.widgetName;e&&e.is(":ui-resizable")&&e.resizable("destroy");e.unbind("."+c);i.unbind("."+c);j.unbind("."+c);a(window).unbind("."+c);d.html(h);d.removeAttr("class");if(g===undefined)d.removeAttr("style");else d.attr("style",g)},refresh:function(e,d){var a=this,c=a._fields,b=c.panel1;if(c._isResizing)return;(d||d===undefined)&&a._updateElementsCss();a._updateElements();if(e||e===undefined){b&&b.is(":ui-resizable")&&b.resizable("destroy");a._initResizer()}},_splitterify:function(){var k=this,e=k.element,m=k.options,b=k._fields,f,i,j,c,d,g,h,l;c=e.find(">div:eq(0)");d=e.find(">div:eq(1)");b.originalStyle=e.attr("style");b.originalContent=e.html();f=a("<div></div>").appendTo(e);i=a("<div></div>").appendTo(f);if(c.length===0)c=a("<div></div>");c.appendTo(i);g=a("<div></div>").appendTo(f);m.barZIndex!==-1&&g.css("z-index",m.barZIndex);h=a("<div></div>").appendTo(g).attr("role","button");l=a("<span></span>").appendTo(h);j=a("<div></div>").appendTo(f);if(d.length===0)d=a("<div></div>");d.appendTo(j);b.wrapper=f;b.panel1=i;b.pnl1Content=c;b.panel2=j;b.pnl2Content=d;b.bar=g;b.expander=h;b.icon=l},_updateElementsCss:function(){var h=this,z=h.element,F=h.options,a=F.orientation==="vertical",e=h._fields,A=e.wrapper,C=e.panel1,D=e.panel2,n=e.pnl1Content,o=e.pnl2Content,E=e.bar,p=e.expander,B=e.icon;z.removeClass(r+" "+q+" "+c+g+" "+c+f+" "+b+g+" "+b+f).addClass(a?r:q);A.attr("class",w);C.removeClass(c+l+" "+b+l).addClass((a?c:b)+l);n.removeClass(c+j+" "+b+j+" "+k).addClass((a?c:b)+j+" "+k);E.attr("class",(a?c:b)+y+" "+t).css("width","").css("height","");p.attr("class",d+(a?"bl "+c:"tr "+b)+v+" "+s).css("left","").css("top","");B.attr("class",x+" "+i+(a?"w":"n"));D.removeClass(c+m+" "+b+m).addClass((a?c:b)+m);o.removeClass(c+j+" "+b+j+" "+k).addClass((a?c:b)+u+" "+k);h._updateExpanderCss()},_updateExpanderCss:function(){var l=this,t=l.options,j=l.element,s=l._fields,h=s.expander,k=s.icon,a=t.orientation==="vertical",e=a?c:b,m=a?"tr":"bl",n="br",q=a?"e":"s",o=a?"bl":"tr",p="tl",r=a?"w":"n";j.removeClass(e+g+" "+e+f);h.removeClass(d+m+" "+d+n+" "+d+o+" "+d+p);k.removeClass(i+q+" "+i+r);if(t.panel1.collapsed){j.addClass(e+f);h.addClass(d+m+" "+d+n);k.addClass(i+q)}else{j.addClass(e+g);h.addClass(d+o+" "+d+p);k.addClass(i+r)}},_updateElements:function(){var o=this,j=o.element,e=o.options,a=e.splitterDistance,i=o._fields,s=i.wrapper,l=i.panel1,q=i.pnl1Content,t=i.panel2,r=i.pnl2Content,p=i.bar,m=i.expander,h=j.width(),d=j.height(),n,k;s.height(d);o._setPanelsScrollMode();if(e.orientation==="vertical"){n=p.outerWidth(true);if(a>h-n)a=h-n;s.width(h*2);if(e.panel2.collapsed&&!e.panel1.collapsed)a=h-n;if(e.panel1.collapsed){j.addClass(c+f);l.css("display","none");a=0}else{j.addClass(c+g);l.css("display","")}l.height(d).width(a);q.outerHeight(d,true);p.outerHeight(d,true);t.height(d).width(h-a-n);r.outerHeight(d,true);m.css("cursor","pointer").css("top",d/2-m.outerHeight(true)/2)}else{k=p.outerHeight(true);if(a>d-k)a=d-k;if(e.panel2.collapsed&&!e.panel1.collapsed)a=d-k;q.outerHeight(a,true);if(e.panel1.collapsed){j.addClass(b+f);l.css("display","none");a=0}else{j.addClass(b+g);l.css("display","")}r.outerHeight(d-a-k,true);l.width(h).height(a);t.width(h).height(d-a-k);m.css("cursor","pointer").css("left",h/2-m.outerWidth(true)/2)}m.css("display",e.showExpander?"":"none")},_setFullSplit:function(b){var c=this,a=c._fields,e=b?"100%":a.width,d=b?"100%":a.height;c.element.css("width",e).css("height",d)},_setPanel1Collapsed:function(c,f){var b=this,d=b.options,e=d.panel1.collapsed;if(e===c)return;if(!b._trigger(e?"expand":"collapse",f,null))return;d.panel1.collapsed=c;if(c)d.panel2.collapsed=false;else a(".ui-resizable-handle",b.element).show();b._updateElements();b._updateExpanderCss();b._trigger(c?"collapsed":"expanded",f,null)},_setPanel2Collapsed:function(b){var c=this,d=c.options,f=d.panel2.collapsed,e=a(".ui-resizable-handle",c.element);if(f===b)return;d.panel2.collapsed=b;if(b){d.panel1.collapsed=false;e.hide()}else e.show();c._updateElements()},_bindEvents:function(){var b=this,g=b._fields,f=g.bar,d=g.expander,h=g.panel1,c=b.widgetName;d.bind("mouseover."+c,function(){d.addClass(e)}).bind("mouseout."+c,function(){d.removeClass(e).removeClass(n)}).bind("mousedown."+c,function(){d.addClass(n)}).bind("mouseup."+c,function(c){var a=b.options;d.removeClass(n);if(a.panel2.collapsed){b._setPanel2Collapsed(!a.panel2.collapsed);return}b._setPanel1Collapsed(!a.panel1.collapsed,c)});f.bind("mouseover."+c,function(){f.addClass(e)}).bind("mouseout."+c,function(){f.removeClass(e)});h.bind("animating."+c,function(a){b._adjustLayout(b);b._trigger("sizing",a,null)}).bind("animated."+c,function(a){b._adjustLayout(b);b._trigger("sized",a,null)});a(".ui-resizable-handle",b.element).bind("mouseover."+c,function(){f.addClass(e)}).bind("mouseout."+c,function(){f.removeClass(e)});a(window).bind("resize."+c,function(){b.refresh()})},_initResizer:function(){var l=this,h=l.element,d=l.options,e=l._fields,t=e.bar,n=e.panel1,k=d.resizeSettings,g=k.animationOptions,m=g.disabled?0:g.duration,v=h.width(),u=h.height(),q,s,j,o,r,i,f;if(d.orientation==="vertical"){q=t.outerWidth(true);s=v-q-d.panel2.minSize;j=d.panel1.minSize;if(j<2)j=2;n.resizable({wijanimate:true,minWidth:j,maxWidth:s,handles:"e",helper:c+p,animateDuration:m,animateEasing:g.easing,ghost:k.ghost,start:function(){e._isResizing=true},stop:function(){e._isResizing=false}})}else{o=t.outerHeight(true);r=u-o-d.panel2.minSize;i=d.panel1.minSize;if(i<2)i=2;n.resizable({wijanimate:true,minHeight:i,maxHeight:r,handles:"s",helper:b+p,animateDuration:m,animateEasing:g.easing,ghost:k.ghost,start:function(){e._isResizing=true},stop:function(){e._isResizing=false}})}f=a(".ui-resizable-handle",h);if(d.panel2.collapsed)f.hide();else f.show();if(a.browser.msie&&a.browser.version<7)d.orientation==="vertical"&&f.height(h.height())},_adjustLayout:function(a){var b=a.options,e=a._fields,d=e.panel1,c=b.orientation==="vertical"?d.width():d.height();if(b.splitterDistance===c)return;b.splitterDistance=c;a._updateElements()},_setPanelsScrollMode:function(){var d=this,c=d._fields,e=d.options,b=[e.panel1.scrollBars,e.panel2.scrollBars];a.each([c.pnl1Content,c.pnl2Content],function(c,a){if(b[c]==="auto")a.css("overflow","auto");else if(b[c]==="both")a.css("overflow","scroll");else if(b[c]==="none")a.css("overflow","hidden");else if(b[c]==="horizontal")a.css("overflow-x","scroll").css("overflow-y","hidden");else b[c]==="vertical"&&a.css("overflow-x","hidden").css("overflow-y","scroll")})}})})(jQuery);(function(a){"use strict";a.ui.plugin.add("resizable","wijanimate",{stop:function(l){var b=a(this).data("resizable"),i=b.options,c=b.element,d=b._proportionallyResizeElements,h=d.length&&/textarea/i.test(d[0].nodeName),j=h&&a.ui.hasScroll(d[0],"left")?0:b.sizeDiff.height,k=h?0:b.sizeDiff.width,g,e,f;c.css("width",b.originalSize.width).css("height",b.originalSize.height);g={width:b.size.width-k,height:b.size.height-j};e=parseInt(c.css("left"),10)+(b.position.left-b.originalPosition.left)||null;f=parseInt(c.css("top"),10)+(b.position.top-b.originalPosition.top)||null;c.animate(a.extend(g,f&&e?{top:f,left:e}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var e={width:parseInt(c.css("width"),10),height:parseInt(c.css("height"),10),top:parseInt(c.css("top"),10),left:parseInt(c.css("left"),10)};d&&d.length&&a(d[0]).css({width:e.width,height:e.height});b._updateCache(e);b._propagate("resize",l);c.trigger("animating")},complete:function(){c.trigger("animated")}})}})})(jQuery);